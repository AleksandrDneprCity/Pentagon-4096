Версия прошивки 1.3 для встроенного в KAY1024
контроллера клавиатуры на ATMega8,48,168.

1) Работа IBM-клавиатуры в режиме Scan Code 2.

2) Реализована работа с EEPROM, по алгоритму,
описанному в форуме.

3) Работает клавиша PAUSE/BREAK - останавливает
работу программы.
Повторное нажатие PAUSE через 20 мсек снова тормозит
программу.
Для продолжения работы нажмите любую клавишу.

4) Добавлена работа с клавиатурными СКРИПТами.
Релизованы:
<WinMenu>+<F2> -  тест мышки;
<WinMenu>+<F10> - тест цвета;
<WinMenu>+<F11> - тест скан-кода нажатой клавиши;
<WinMenu>+<V> -   текст версии "ZXKB v.1.3";
<WinMenu>+<L> -   RESET,LOAD ""<CR>;
<WinMenu>+<ESC> - RESET,LOAD ""<CR>; - набор посимвольный
<WinMenu>+<T> -   RANDOMIZE USR 15616<CR>;
<WinMenu>+<R> -   RANDOMIZE USR 1561;

5) Команды управления контроллером:
Задать адрес EEPROM - 0x55,"A",Adr_L,Adr_H
Прочитать байт из EEPROM по ниблам - 0x55,"R",Data_H,Data_L
Записать байт в EEPROM - 0x55,"W',Data
Прочитать скан-код нажатой клавиши - 0x55,"C",Data_H,Data_L
Управление режимом TURBO:
Выключить TURBO  - 0x55,"T",0x00
Включить TURBO - 0x55,"T",0xFF
Прочитать состояние TURBO - 0x55,"T",0x01 (не 0x00 и не 0xFF)

6) Для фиксации текущих состояний NumLock и ScrollLock
в EEPROM контроллера, нажмите их с Shift.

7) При не подключенной к контроллеру PS/2 клавиатуры
не блокируется работа механической клавиатуры.

8) Команда программного Сброса в скриптах (код 0x0C0) не
сбрасывает адрес скрипта, что позволяет выполнять
скрипты, работающие со сбросом Компа, например:
RESET,LOAD"",ENTER

KBD13_168.HEX - для ATMega168/328
KBD13_48.HEX - для ATMega48/88
KBD13_M8.HEX - для ATMega8

Специальные версии с отключенным /WAIT в режиме TURBO (горит ScrLock)

KBD13_168nw.HEX - для ATMega168/328
KBD13_48nw.HEX - для ATMega48/88
KBD13_M8nw.HEX - для ATMega8


14/06/2012
caro
k2k@list.ru
